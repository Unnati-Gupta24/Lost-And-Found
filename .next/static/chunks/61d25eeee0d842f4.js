(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(43476),a=e.i(61668),r=e.i(71645);let s=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:d="",children:i,iconNode:n,...c},m)=>(0,r.createElement)("svg",{ref:m,...l,width:t,height:t,stroke:e,strokeWidth:o?24*Number(a)/Number(t):a,className:s("lucide",d),...c},[...n.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(i)?i:[i]])),d=(e,t)=>{let a=(0,r.forwardRef)(({className:a,...l},d)=>(0,r.createElement)(o,{ref:d,iconNode:t,className:s(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,a),...l}));return a.displayName=`${e}`,a},i=d("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),n=d("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);function c(){let{login:e,signup:s}=(0,a.useAuth)(),[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),[u,x]=(0,r.useState)(""),[b,g]=(0,r.useState)(!1),[p,f]=(0,r.useState)(""),v=async t=>{t.preventDefault(),f(""),g(!0);try{l?await s(d,m,u):await e(d,m)}catch(e){f("Authentication failed. Please try again.")}finally{g(!1)}};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-background flex items-center justify-center px-4",children:(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-12 w-full max-w-6xl",children:[(0,t.jsxs)("div",{className:"hidden md:flex flex-col justify-center space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:(0,t.jsx)(i,{className:"w-6 h-6 text-white"})}),(0,t.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Lost & Found"})]}),(0,t.jsx)("p",{className:"text-xl text-muted-foreground",children:"Connect with your community"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(i,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground",children:"Find Your Lost Items"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Browse posts from your community"})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(n,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground",children:"Connect & Chat"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Message users directly to coordinate"})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(i,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground",children:"Help Others"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Post about found items and reunite them"})]})]})]})]}),(0,t.jsx)("div",{className:"flex flex-col justify-center",children:(0,t.jsxs)("div",{className:"bg-card rounded-2xl shadow-lg p-8 border border-border",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-2",children:l?"Create Account":"Welcome Back"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:l?"Join our community to get started":"Sign in to your account"}),(0,t.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[l&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Full Name"}),(0,t.jsx)("input",{type:"text",value:u,onChange:e=>x(e.target.value),className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-blue-500 transition",placeholder:"John Doe",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Email Address"}),(0,t.jsx)("input",{type:"email",value:d,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-blue-500 transition",placeholder:"you@example.com",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Password"}),(0,t.jsx)("input",{type:"password",value:m,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-blue-500 transition",placeholder:"••••••••",required:!0})]}),p&&(0,t.jsx)("div",{className:"bg-destructive/10 text-destructive px-4 py-3 rounded-lg text-sm",children:p}),(0,t.jsx)("button",{type:"submit",disabled:b,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Loading...":l?"Create Account":"Sign In"})]}),(0,t.jsx)("div",{className:"mt-6 pt-6 border-t border-border",children:(0,t.jsxs)("p",{className:"text-center text-muted-foreground",children:[l?"Already have an account?":"Don't have an account?"," ",(0,t.jsx)("button",{onClick:()=>o(!l),className:"text-blue-600 dark:text-blue-400 font-semibold hover:underline",children:l?"Sign In":"Sign Up"})]})})]})})]})})}var m=e.i(84540);let h=d("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),u=d("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),x=d("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),b=d("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),g=d("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),p=d("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);function f({currentPage:e,setCurrentPage:r}){let{user:s,logout:l}=(0,a.useAuth)(),{theme:o,toggleTheme:d}=(0,m.useTheme)();return(0,t.jsxs)("div",{className:"w-64 backdrop-blur-md bg-white/10 dark:bg-black/20 border border-r border-white/20 dark:border-white/10 flex flex-col overflow-y-auto",children:[(0,t.jsx)("div",{className:"backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 rounded-2xl p-6 shadow-xl hover:shadow-2xl hover:bg-white/15 dark:hover:bg-black/25 transition-all duration-300 border-b rounded-none animate-slide-down",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg shadow-blue-500/40 animate-float",children:(0,t.jsx)(i,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"font-bold text-foreground bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Lost & Found"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Community"})]})]})}),(0,t.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:[{icon:h,label:"Feed",page:"home"},{icon:u,label:"New Post",page:"create"},{icon:n,label:"Messages",page:"chat"},{icon:x,label:"Profile",page:"dashboard"}].map(({icon:a,label:s,page:l},o)=>(0,t.jsxs)("button",{onClick:()=>r(l),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-300 ${e===l?"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-lg shadow-blue-500/30 scale-105":"text-muted-foreground hover:text-foreground hover:bg-white/10 dark:hover:bg-black/20"}`,style:{animation:`slide-in 0.6s ease-out ${.1*o}s backwards`},children:[(0,t.jsx)(a,{className:"w-5 h-5"}),s]},l))}),(0,t.jsxs)("div",{className:"p-4 space-y-3 border-t border-white/10",children:[(0,t.jsxs)("div",{className:"backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 rounded-xl px-4 py-3 animate-fade-in",children:[(0,t.jsx)("img",{src:s?.avatar||"/placeholder.svg",alt:s?.name,className:"w-10 h-10 rounded-full mb-2 animate-float"}),(0,t.jsx)("p",{className:"font-semibold text-foreground truncate",children:s?.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:s?.email})]}),(0,t.jsx)("button",{onClick:d,className:"w-full backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 rounded-xl px-6 py-3 font-medium transition-all duration-300 hover:bg-white/20 dark:hover:bg-black/30 active:scale-95 flex items-center gap-3 px-4 py-2 text-foreground hover:text-white transition-all duration-300 group",children:"light"===o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{className:"w-5 h-5 group-hover:scale-110 transition"}),(0,t.jsx)("span",{className:"text-sm",children:"Dark Mode"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p,{className:"w-5 h-5 group-hover:scale-110 transition"}),(0,t.jsx)("span",{className:"text-sm",children:"Light Mode"})]})}),(0,t.jsxs)("button",{onClick:l,className:"w-full backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 rounded-xl px-6 py-3 font-medium transition-all duration-300 hover:bg-white/20 dark:hover:bg-black/30 active:scale-95 flex items-center gap-3 px-4 py-2 text-red-500 hover:text-red-400 hover:bg-red-500/20 transition-all duration-300 active:scale-95",children:[(0,t.jsx)(b,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"text-sm",children:"Sign Out"})]})]})]})}let v=d("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),w=d("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),y=d("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);function k(){let{user:e}=(0,a.useAuth)(),[s,l]=(0,r.useState)("all"),[o,d]=(0,r.useState)([]),[c,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/posts"),t=await e.json();d(t.posts)}catch(e){console.error("Failed to fetch posts:",e)}finally{m(!1)}})()},[]);let h=(0,r.useMemo)(()=>o.filter(e=>"all"===s||e.type===s),[o,s]),u=async t=>{if(e)try{o.find(e=>e.id===t)?.likedBy.includes(e.id)?await fetch(`/api/posts/${t}/like`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id})}):await fetch(`/api/posts/${t}/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id})});let a=await fetch("/api/posts"),r=await a.json();d(r.posts)}catch(e){console.error("Failed to toggle like:",e)}};return c?(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("p",{className:"text-muted-foreground animate-fade-in",children:"Loading posts..."})}):(0,t.jsxs)("div",{className:"flex flex-col h-full bg-background/50",children:[(0,t.jsxs)("div",{className:"backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 border-b sticky top-0 z-20 px-6 py-4 animate-slide-down",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-4 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Lost & Found Feed"}),(0,t.jsx)("div",{className:"flex gap-2",children:["all","lost","found"].map((e,a)=>(0,t.jsx)("button",{onClick:()=>l(e),className:`backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 rounded-xl px-6 py-3 font-medium transition-all duration-300 hover:bg-white/20 dark:hover:bg-black/30 active:scale-95 text-sm ${s===e?"bg-blue-600/80 dark:bg-blue-600/60 text-white border-blue-500":"text-foreground hover:text-white"}`,style:{animation:`slide-up 0.6s ease-out ${.1*a}s backwards`},children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,t.jsx)("div",{className:"max-w-2xl mx-auto p-4 space-y-4",children:h.map((a,r)=>(0,t.jsxs)("div",{className:"backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 rounded-2xl p-6 shadow-xl hover:shadow-2xl hover:bg-white/15 dark:hover:bg-black/25 transition-all duration-300 animate-fade-in hover:scale-105 group",style:{animation:`slide-up 0.6s ease-out ${r%3*.1}s backwards`},children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsx)("img",{src:a.author.avatar||"/placeholder.svg",alt:a.author.name,className:"w-12 h-12 rounded-full animate-float shadow-lg"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground group-hover:text-blue-600 transition",children:a.author.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:a.author.location})]}),(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold backdrop-blur transition ${"lost"===a.type?"bg-red-500/30 border border-red-500/50 text-red-700 dark:text-red-300":"bg-emerald-500/30 border border-emerald-500/50 text-emerald-700 dark:text-emerald-300"}`,children:a.type.toUpperCase()})]}),(0,t.jsx)("h4",{className:"text-lg font-bold text-foreground mb-2 group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:via-purple-600 group-hover:to-pink-600 group-hover:bg-clip-text group-hover:text-transparent transition",children:a.title}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:a.description}),a.image&&(0,t.jsx)("img",{src:a.image||"/placeholder.svg",alt:a.title,className:"w-full h-72 object-cover rounded-xl mb-4 transition-transform duration-300 group-hover:scale-105"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground mb-4 px-2 py-2 rounded-lg bg-white/5 dark:bg-black/20",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(w,{className:"w-4 h-4"}),a.location]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y,{className:"w-4 h-4"}),new Date(a.date).toLocaleDateString()]})]}),(0,t.jsxs)("div",{className:"flex gap-4 pt-4 border-t border-white/10 dark:border-white/5",children:[(0,t.jsxs)("button",{onClick:()=>u(a.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-300 group/btn ${e&&a.likedBy.includes(e.id)?"text-red-600 dark:text-red-400 bg-red-500/20 backdrop-blur scale-105":"text-muted-foreground hover:text-foreground hover:bg-white/10 dark:hover:bg-black/20"}`,children:[(0,t.jsx)(i,{className:"w-5 h-5 transition-transform group-hover/btn:scale-110",fill:e&&a.likedBy.includes(e.id)?"currentColor":"none"}),(0,t.jsx)("span",{className:"font-semibold",children:a.likes})]}),(0,t.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-muted-foreground hover:text-foreground rounded-lg font-medium transition-all duration-300 hover:bg-white/10 dark:hover:bg-black/20",children:[(0,t.jsx)(n,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:a.comments})]}),(0,t.jsx)("button",{className:"flex items-center gap-2 px-4 py-2 text-muted-foreground hover:text-foreground rounded-lg font-medium transition-all duration-300 hover:bg-white/10 dark:hover:bg-black/20",children:(0,t.jsx)(v,{className:"w-5 h-5"})})]})]},a.id))})})]})}let j=d("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);function N(){let{user:e}=(0,a.useAuth)(),[s,l]=(0,r.useState)("all"),[o,d]=(0,r.useState)([]),[c,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{e&&(async()=>{try{let t=await fetch(`/api/posts?authorId=${e.id}`),a=await t.json();d(a.posts)}catch(e){console.error("Failed to fetch user posts:",e)}finally{m(!1)}})()},[e]);let h=o.filter(e=>"all"===s||e.type===s);return e?(0,t.jsxs)("div",{className:"flex flex-col h-full bg-background/50 overflow-y-auto",children:[(0,t.jsx)("div",{className:"backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 border-b sticky top-0 z-20 animate-slide-down",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[(0,t.jsxs)("div",{className:"flex items-start gap-6 mb-8 animate-fade-in",children:[(0,t.jsx)("img",{src:e?.avatar||"/placeholder.svg",alt:e?.name,className:"w-24 h-24 rounded-full border-4 border-blue-500/50 shadow-lg animate-float"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:e?.name}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:e?.email}),(0,t.jsxs)("div",{className:"flex gap-6 text-sm",children:[(0,t.jsxs)("div",{className:"backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 rounded-lg px-4 py-2 animate-scale-in",style:{animationDelay:"0.1s"},children:[(0,t.jsx)("p",{className:"font-semibold text-foreground",children:h.length}),(0,t.jsx)("p",{className:"text-muted-foreground text-xs",children:"Posts"})]}),(0,t.jsxs)("div",{className:"backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 rounded-lg px-4 py-2 animate-scale-in",style:{animationDelay:"0.2s"},children:[(0,t.jsx)("p",{className:"font-semibold text-foreground",children:h.reduce((e,t)=>e+t.likes,0)}),(0,t.jsx)("p",{className:"text-muted-foreground text-xs",children:"Total Likes"})]}),(0,t.jsxs)("div",{className:"backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 rounded-lg px-4 py-2 animate-scale-in",style:{animationDelay:"0.3s"},children:[(0,t.jsx)("p",{className:"font-semibold text-foreground",children:new Date(e?.joinedDate||"").toLocaleDateString("en-US",{month:"short",year:"numeric"})}),(0,t.jsx)("p",{className:"text-muted-foreground text-xs",children:"Joined"})]})]})]})]}),(0,t.jsx)("div",{className:"flex gap-2 border-t border-white/10 pt-4",children:["all","lost","found"].map((e,a)=>(0,t.jsx)("button",{onClick:()=>l(e),className:`backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 rounded-xl px-6 py-3 font-medium transition-all duration-300 hover:bg-white/20 dark:hover:bg-black/30 active:scale-95 text-sm ${s===e?"bg-blue-600/80 dark:bg-blue-600/60 text-white border-blue-500":"text-foreground hover:text-white"}`,style:{animation:`slide-up 0.6s ease-out ${.1*a}s backwards`},children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-6 py-8",children:c?(0,t.jsx)("div",{className:"text-center py-12 animate-fade-in",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading posts..."})}):0===h.length?(0,t.jsxs)("div",{className:"text-center py-12 animate-fade-in",children:[(0,t.jsx)(i,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No posts yet"})]}):(0,t.jsx)("div",{className:"grid gap-6",children:h.map((e,a)=>(0,t.jsxs)("div",{className:"backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 rounded-2xl p-6 shadow-xl hover:shadow-2xl hover:bg-white/15 dark:hover:bg-black/25 transition-all duration-300 flex gap-4 overflow-hidden group hover:scale-105",style:{animation:`slide-up 0.6s ease-out ${a%3*.1}s backwards`},children:[e.image&&(0,t.jsx)("img",{src:e.image||"/placeholder.svg",alt:e.title,className:"w-40 h-40 object-cover flex-shrink-0 transition-transform group-hover:scale-110"}),(0,t.jsxs)("div",{className:"flex-1 p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-foreground group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:via-purple-600 group-hover:to-pink-600 group-hover:bg-clip-text group-hover:text-transparent transition",children:e.title}),(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold flex-shrink-0 backdrop-blur ${"lost"===e.type?"bg-red-500/30 border border-red-500/50 text-red-700 dark:text-red-300":"bg-emerald-500/30 border border-emerald-500/50 text-emerald-700 dark:text-emerald-300"}`,children:e.type.toUpperCase()})]}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm mb-3",children:e.description}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs text-muted-foreground mb-4 px-2 py-2 rounded-lg bg-white/5 dark:bg-black/20",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(w,{className:"w-3 h-3"}),e.location]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(y,{className:"w-3 h-3"}),new Date(e.date).toLocaleDateString()]})]}),(0,t.jsxs)("div",{className:"flex gap-4 pt-2 border-t border-white/10",children:[(0,t.jsxs)("button",{className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-all hover:scale-110",children:[(0,t.jsx)(i,{className:"w-4 h-4"}),e.likes]}),(0,t.jsxs)("button",{className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-all hover:scale-110",children:[(0,t.jsx)(n,{className:"w-4 h-4"}),e.comments]}),(0,t.jsx)("button",{className:"ml-auto text-muted-foreground hover:text-foreground transition-transform hover:rotate-90",children:(0,t.jsx)(j,{className:"w-4 h-4"})})]})]})]},e.id))})})})]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."})}let S=d("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function M(){let{user:e}=(0,a.useAuth)(),[s,l]=(0,r.useState)("lost"),[o,d]=(0,r.useState)(""),[i,n]=(0,r.useState)(""),[c,m]=(0,r.useState)(""),[h,x]=(0,r.useState)(""),[b,g]=(0,r.useState)(null),[p,f]=(0,r.useState)(!1),[v,w]=(0,r.useState)(""),y=async t=>{if(t.preventDefault(),e){f(!0),w("");try{if(!(await fetch("/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:s,title:o,description:i,location:c,date:h,image:b,authorId:e.id})})).ok)throw Error("Failed to create post");d(""),n(""),m(""),x(""),g(null),alert("Post created successfully!")}catch(e){w("Failed to create post. Please try again."),console.error(e)}finally{f(!1)}}};return(0,t.jsx)("div",{className:"flex flex-col h-full bg-background/50 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex-1 max-w-2xl mx-auto w-full px-6 py-8 animate-slide-up",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold text-foreground mb-2 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Create a Post"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-8",children:"Share details about your lost or found item with the community"}),v&&(0,t.jsx)("div",{className:"backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 border-red-500/50 text-red-700 dark:text-red-400 p-4 rounded-xl mb-6 animate-scale-in",children:v}),(0,t.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"animate-slide-up",style:{animationDelay:"0.1s"},children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-4",children:"What would you like to post?"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4",children:["lost","found"].map(e=>(0,t.jsxs)("button",{onClick:()=>l(e),type:"button",className:`backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 rounded-2xl p-6 shadow-xl hover:shadow-2xl hover:bg-white/15 dark:hover:bg-black/25 transition-all duration-300 text-left ${s===e?"border-blue-500/80 bg-blue-600/40 scale-105":"hover:border-blue-500/50 hover:bg-blue-500/20"}`,children:[(0,t.jsx)("p",{className:"font-semibold text-foreground capitalize mb-1",children:"lost"===e?"Lost Item":"Found Item"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"lost"===e?"Help find something I lost":"Help return something I found"})]},e))})]}),(0,t.jsxs)("div",{className:"animate-slide-up",style:{animationDelay:"0.2s"},children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-3",children:"Add Image"}),(0,t.jsx)("div",{className:"relative",children:b?(0,t.jsxs)("div",{className:"relative animate-scale-in",children:[(0,t.jsx)("img",{src:b||"/placeholder.svg",alt:"Preview",className:"w-full h-80 object-cover rounded-2xl"}),(0,t.jsx)("button",{onClick:()=>g(null),type:"button",className:"absolute top-2 right-2 bg-red-600/80 hover:bg-red-700 text-white p-2 rounded-full backdrop-blur transition hover:scale-110 active:scale-95",children:(0,t.jsx)(S,{className:"w-5 h-5"})})]}):(0,t.jsxs)("label",{className:"backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 rounded-2xl p-6 shadow-xl hover:shadow-2xl hover:bg-white/15 dark:hover:bg-black/25 transition-all duration-300 text-center cursor-pointer border-dashed border-2 group transition hover:scale-105",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onload=e=>{g(e.target?.result)},e.readAsDataURL(t)}},className:"hidden"}),(0,t.jsx)(u,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3 group-hover:scale-125 transition"}),(0,t.jsx)("p",{className:"font-semibold text-foreground",children:"Add a photo"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Upload an image to help identify the item"})]})})]}),(0,t.jsxs)("div",{className:"animate-slide-up",style:{animationDelay:"0.3s"},children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Title"}),(0,t.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),placeholder:"e.g., Black Wallet Lost Near Park",className:"w-full backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 px-4 py-3 rounded-xl placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-blue-500 transition",required:!0})]}),(0,t.jsxs)("div",{className:"animate-slide-up",style:{animationDelay:"0.4s"},children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Description"}),(0,t.jsx)("textarea",{value:i,onChange:e=>n(e.target.value),placeholder:"Provide detailed description of the item...",rows:4,className:"w-full backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 px-4 py-3 rounded-xl placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-blue-500 transition resize-none",required:!0})]}),(0,t.jsxs)("div",{className:"animate-slide-up",style:{animationDelay:"0.5s"},children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Location"}),(0,t.jsx)("input",{type:"text",value:c,onChange:e=>m(e.target.value),placeholder:"e.g., Central Park, Downtown Area",className:"w-full backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 px-4 py-3 rounded-xl placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-blue-500 transition",required:!0})]}),(0,t.jsxs)("div",{className:"animate-slide-up",style:{animationDelay:"0.6s"},children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Date"}),(0,t.jsx)("input",{type:"date",value:h,onChange:e=>x(e.target.value),className:"w-full backdrop-blur-md bg-white/10 dark:bg-black/20 border border-white/20 dark:border-white/10 px-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition",required:!0})]}),(0,t.jsx)("button",{type:"submit",disabled:p||!o||!i||!c||!h,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed animate-glow-pulse active:scale-95 animate-slide-up",style:{animationDelay:"0.7s"},children:p?"Publishing...":"Publish Post"})]})]})})}function I(){let e=(0,r.useRef)(null),a=(0,r.useRef)([]),s=(0,r.useRef)();return(0,r.useEffect)(()=>{let t=e.current;if(!t)return;let r=t.getContext("2d");if(!r)return;let l=()=>{t.width=window.innerWidth,t.height=window.innerHeight};l(),window.addEventListener("resize",l);for(let e=0;e<50;e++)a.current.push({x:Math.random()*t.width,y:Math.random()*t.height,vx:(Math.random()-.5)*1.5,vy:(Math.random()-.5)*1.5,radius:2*Math.random()+1,opacity:.5*Math.random()+.2,life:100*Math.random()+100});let o=()=>{r.fillStyle="rgba(0, 0, 0, 0.02)",r.fillRect(0,0,t.width,t.height);let e=document.documentElement.classList.contains("dark")?"rgba(255, 255, 255, ":"rgba(59, 130, 246, ";a.current=a.current.filter(e=>e.life>0),a.current.forEach((s,l)=>{s.x+=s.vx,s.y+=s.vy,s.life-=.5,(s.x<0||s.x>t.width)&&(s.vx*=-1),(s.y<0||s.y>t.height)&&(s.vy*=-1),s.x=Math.max(0,Math.min(t.width,s.x)),s.y=Math.max(0,Math.min(t.height,s.y));let o=s.life/200*s.opacity;r.fillStyle=`${e}${o})`,r.beginPath(),r.arc(s.x,s.y,s.radius,0,2*Math.PI),r.fill();for(let t=l+1;t<a.current.length;t++){let l=a.current[t],d=l.x-s.x,i=l.y-s.y,n=Math.sqrt(d*d+i*i);n<150&&(r.strokeStyle=`${e}${.3*o/(n/100)})`,r.lineWidth=.5,r.beginPath(),r.moveTo(s.x,s.y),r.lineTo(l.x,l.y),r.stroke())}}),.3>Math.random()&&a.current.length<50&&a.current.push({x:Math.random()*t.width,y:Math.random()*t.height,vx:(Math.random()-.5)*1.5,vy:(Math.random()-.5)*1.5,radius:2*Math.random()+1,opacity:.5*Math.random()+.2,life:100*Math.random()+100}),s.current=requestAnimationFrame(o)};return o(),()=>{window.removeEventListener("resize",l),s.current&&cancelAnimationFrame(s.current)}},[]),(0,t.jsx)("canvas",{ref:e,className:"fixed inset-0 pointer-events-none opacity-40 dark:opacity-60",style:{zIndex:0}})}let D=d("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),C=d("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),L=d("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),O=d("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),P="user-1",T=[{id:"user-2",name:"Sarah Johnson",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah"},{id:"user-3",name:"Mike Chen",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Mike"},{id:"user-4",name:"Emma Davis",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Emma"}],$=[{id:"conv-1",otherUser:T[0],post:"iPhone 13 for Sale",lastMessage:"Is it still available?",lastMessageTime:new Date(Date.now()-3e5).toISOString(),participants:[P,T[0].id]},{id:"conv-2",otherUser:T[1],post:"Gaming Laptop",lastMessage:"Can we meet tomorrow?",lastMessageTime:new Date(Date.now()-18e5).toISOString(),participants:[P,T[1].id]},{id:"conv-3",otherUser:T[2],post:"Mountain Bike",lastMessage:"Thanks for the info!",lastMessageTime:new Date(Date.now()-72e5).toISOString(),participants:[P,T[2].id]}],A={"conv-1":[{id:"msg-1",conversationId:"conv-1",senderId:T[0].id,text:"Hi! I'm interested in the iPhone 13",timestamp:new Date(Date.now()-6e5).toISOString()},{id:"msg-2",conversationId:"conv-1",senderId:P,text:"Hello! Yes, it’s in great condition",timestamp:new Date(Date.now()-48e4).toISOString()},{id:"msg-3",conversationId:"conv-1",senderId:T[0].id,text:"Is it still available?",timestamp:new Date(Date.now()-3e5).toISOString()}],"conv-2":[{id:"msg-4",conversationId:"conv-2",senderId:T[1].id,text:"Hey, what's the spec on the gaming laptop?",timestamp:new Date(Date.now()-36e5).toISOString()},{id:"msg-5",conversationId:"conv-2",senderId:P,text:"RTX 3070, 16GB RAM, i7 processor",timestamp:new Date(Date.now()-27e5).toISOString()},{id:"msg-6",conversationId:"conv-2",senderId:T[1].id,text:"Perfect! Can we meet tomorrow?",timestamp:new Date(Date.now()-18e5).toISOString()}],"conv-3":[{id:"msg-7",conversationId:"conv-3",senderId:T[2].id,text:"Is the mountain bike frame size medium?",timestamp:new Date(Date.now()-108e5).toISOString()},{id:"msg-8",conversationId:"conv-3",senderId:P,text:"Yes, it’s a medium frame. 27.5 inch wheels",timestamp:new Date(Date.now()-9e6).toISOString()},{id:"msg-9",conversationId:"conv-3",senderId:T[2].id,text:"Thanks for the info!",timestamp:new Date(Date.now()-72e5).toISOString()}]};class E{url;readyState;onopen=null;onmessage=null;onclose=null;onerror=null;constructor(e){this.url=e,this.readyState=0,setTimeout(()=>{this.readyState=1,this.onopen?.(new Event("open"))},500)}send(e){setTimeout(()=>{this.onmessage?.(new MessageEvent("message",{data:JSON.stringify({type:"delivered",data:JSON.parse(e)})}))},200),Math.random()>.7&&setTimeout(()=>{let t=["That sounds good!","Let me check and get back to you","Sure, I’m available","Can you send me more details?","Perfect, thanks!"],a=JSON.parse(e),r={id:`msg-${Date.now()}-${Math.random()}`,conversationId:a.conversationId,senderId:a.receiverId,text:t[Math.floor(Math.random()*t.length)],timestamp:new Date().toISOString()};this.onmessage?.(new MessageEvent("message",{data:JSON.stringify({type:"message",data:r})}))},2e3+3e3*Math.random())}close(){this.readyState=3,this.onclose?.(new Event("close"))}}function z(){let[e,a]=(0,r.useState)($),[s,l]=(0,r.useState)($[0].id),[o,d]=(0,r.useState)(A),[i,n]=(0,r.useState)(""),[c,m]=(0,r.useState)(""),[h,u]=(0,r.useState)(!1),x=(0,r.useRef)(null),b=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=new E("wss://demo-chat-server.com/ws");return e.onopen=()=>{u(!0)},e.onmessage=e=>{let{type:t,data:r}=JSON.parse(e.data);"message"===t&&(d(e=>({...e,[r.conversationId]:[...e[r.conversationId]||[],r]})),a(e=>e.map(e=>e.id===r.conversationId?{...e,lastMessage:r.text,lastMessageTime:r.timestamp}:e)))},e.onclose=()=>u(!1),e.onerror=()=>u(!1),x.current=e,()=>e.close()},[]),(0,r.useEffect)(()=>{b.current?.scrollIntoView({behavior:"smooth"})},[o,s]);let g=e.find(e=>e.id===s),p=o[s]||[],f=e.filter(e=>e.otherUser.name.toLowerCase().includes(c.toLowerCase()));return(0,t.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-950 dark:via-slate-900 dark:to-indigo-950",children:[(0,t.jsxs)("div",{className:"w-80 backdrop-blur-xl bg-white/60 dark:bg-slate-900/60 border-r border-white/20 dark:border-white/10 flex flex-col shadow-2xl",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-white/20 dark:border-white/10 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Messages"}),h?(0,t.jsx)(L,{className:"text-green-500 w-5 h-5"}):(0,t.jsx)(O,{className:"text-red-500 animate-pulse w-5 h-5"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Search conversations...",value:c,onChange:e=>m(e.target.value),className:"w-full bg-white/40 dark:bg-slate-800/40 border border-white/30 dark:border-white/10 pl-10 pr-4 py-2.5 rounded-xl focus:ring-2 focus:ring-blue-500 focus:outline-none"})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:f.map(e=>{let a,r;return(0,t.jsx)("button",{onClick:()=>l(e.id),className:`w-full px-4 py-4 text-left border-b border-white/10 hover:bg-white/30 dark:hover:bg-slate-800/30 transition ${s===e.id?"bg-blue-500/20 border-l-4 border-l-blue-500":""}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("img",{src:e.otherUser.avatar,className:"w-12 h-12 rounded-full ring-2 ring-white/50"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"font-semibold truncate",children:e.otherUser.name}),(0,t.jsx)("span",{className:"text-xs text-slate-500",children:(a=new Date(e.lastMessageTime),(r=Math.floor((Date.now()-a.getTime())/6e4))<1?"Just now":r<60?`${r}m ago`:r<1440?`${Math.floor(r/60)}h ago`:a.toLocaleDateString())})]}),(0,t.jsx)("p",{className:"text-sm text-slate-600 truncate",children:e.lastMessage}),(0,t.jsxs)("p",{className:"text-xs text-blue-600 truncate",children:["Re: ",e.post]})]})]})},e.id)})})]}),(0,t.jsx)("div",{className:"flex-1 flex flex-col",children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b bg-white/60 dark:bg-slate-900/60 backdrop-blur-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("img",{src:g.otherUser.avatar,className:"w-12 h-12 rounded-full ring-2 ring-white/50"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:g.otherUser.name}),(0,t.jsxs)("p",{className:"text-sm text-slate-600",children:["About: ",g.post]})]})]}),(0,t.jsx)(j,{className:"w-5 h-5 text-slate-500 hover:text-slate-800 cursor-pointer"})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[p.map(e=>(0,t.jsx)("div",{className:`flex ${e.senderId===P?"justify-end":"justify-start"}`,children:(0,t.jsxs)("div",{className:`max-w-md rounded-2xl px-4 py-3 shadow-lg ${e.senderId===P?"bg-gradient-to-r from-blue-500 to-purple-600 text-white":"bg-white/80 dark:bg-slate-800/80 border border-white/30 text-slate-900 dark:text-white"}`,children:[(0,t.jsx)("p",{children:e.text}),(0,t.jsx)("p",{className:"text-xs mt-2 opacity-70",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e.id)),(0,t.jsx)("div",{ref:b})]}),(0,t.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!i.trim()||!s||!h||!g)return;let t={id:`msg-${Date.now()}`,conversationId:s,senderId:P,receiverId:g.otherUser.id,text:i,timestamp:new Date().toISOString()};d(e=>({...e,[s]:[...e[s]||[],t]})),a(e=>e.map(e=>e.id===s?{...e,lastMessage:i,lastMessageTime:t.timestamp}:e)),x.current?.send(JSON.stringify(t)),n("")},className:"flex gap-3 px-6 py-4 bg-white/60 dark:bg-slate-900/60 border-t backdrop-blur-xl",children:[(0,t.jsx)("input",{type:"text",value:i,onChange:e=>n(e.target.value),placeholder:h?"Type a message...":"Connecting...",disabled:!h,className:"flex-1 px-4 py-3 rounded-xl border border-white/30 bg-white/60 dark:bg-slate-800/60 focus:ring-2 focus:ring-blue-500 focus:outline-none disabled:opacity-50"}),(0,t.jsx)("button",{type:"submit",disabled:!i.trim()||!h,className:"px-6 py-3 rounded-xl text-white bg-gradient-to-r from-blue-500 to-purple-600 disabled:opacity-50",children:(0,t.jsx)(D,{className:"w-5 h-5"})})]})]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-slate-400",children:"Select a conversation to start chatting"})})]})}function U(){let[e,a]=(0,r.useState)("home");return(0,t.jsxs)("div",{className:"flex h-screen bg-background text-foreground overflow-hidden relative",children:[(0,t.jsx)(I,{}),(0,t.jsxs)("div",{className:"relative z-10 flex h-full w-full",children:[(0,t.jsx)(f,{currentPage:e,setCurrentPage:a}),(0,t.jsxs)("main",{className:"flex-1 overflow-hidden",children:["home"===e&&(0,t.jsx)(k,{}),"dashboard"===e&&(0,t.jsx)(N,{}),"create"===e&&(0,t.jsx)(M,{}),"chat"===e&&(0,t.jsx)(z,{})]})]})]})}function F(){let{user:e,isLoading:r}=(0,a.useAuth)();return r?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-background",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full border-4 border-border border-t-primary animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):e?(0,t.jsx)(U,{}):(0,t.jsx)(c,{})}e.s(["default",()=>F],31713)}]);